<dataConfig>
    <dataSource type="JdbcDataSource"
              driver="com.microsoft.sqlserver.jdbc.SQLServerDriver"
              url="jdbc:sqlserver://nbnsql-b.nerc-lancaster.ac.uk;databaseName=NBNWarehouse" 
              user="NBNImporter"
              password="Ecowaswashere9"/>
    <document name="nbn-gateway">
        <entity name="taxon" query="Select * From TaxonData" transformer="TemplateTransformer">	  
            <field column="record_id" template="TAXON-${taxon.taxonVersionKey}" />
            <field column="record_type" template="taxon" />
            <entity name="categories" query="select isnull((tgd1.taxonGroupKey + '>' + tgd.taxonGroupKey),tgd.taxonGroupKey) breadcrumbNavigation
                    from TaxonGroupData tgd left outer join TaxonGroupData tgd1 on tgd.parent = tgd1.taxonGroupKey
                    where tgd.taxonGroupKey = '${taxon.navigationGroupKey}'
                    union all
                    select tgd1.taxonGroupKey breadcrumbNavigation
                    from TaxonGroupData tgd left outer join TaxonGroupData tgd1 on tgd.parent = tgd1.taxonGroupKey
                    where tgd.taxonGroupKey = '${taxon.navigationGroupKey}'
                    and tgd1.taxonGroupKey is not null">
                <field name="category" column="breadcrumbNavigation" />
            </entity>
        </entity>
        <entity name="designation" query="Select * From DesignationData" transformer="TemplateTransformer">
            <field column="record_id" template="DESIG-${designation.designationID}" />
            <field column="record_type" template="desig" />
        </entity>
    </document>
</dataConfig>
