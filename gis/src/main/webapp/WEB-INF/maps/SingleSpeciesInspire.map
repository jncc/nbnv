[#ftl]
[#import "libraries/template.ftl" as template]

[@template.context title="Single Species Map" requires=[]]
    SYMBOL
        NAME 'absence'
        TYPE HATCH
    END

    [#list layers as layer_name]
                [@layer group=layer_name name="Presence" data=presencelayerGenerator.getData(layer_name)]
                    NAME               "${layer_name} Species Presence"
                    STYLE
                        COLOR          80 80 80
                        OUTLINECOLOR   0 0 0
                        WIDTH          1
                    END
                [/@layer]
    [/#list]
[/@template.context]

[#-- Definition of a Single species layer, All single species layers consist of grouped layers --]
[#macro layer group name data]
    LAYER
        NAME                        "${group}_${name}"
        GROUP                       "${group}"
        TYPE                        POLYGON
        STATUS                      OFF
        CONNECTIONTYPE              PLUGIN
        PLUGIN                      "msplugin_mssql2008.dll"
        CONNECTION                  "${properties.spatialConnection}"
        PROCESSING                  "CLOSE_CONNECTION=DEFER"
        DATA                        "${data}"
        TEMPLATE                    "dummy.txt"
        EXTENT                      -180 -90 180 90

        METADATA
            "wms_title"             "${group}_${name}"
            "wms_include_items"     "all"
        END

        PROJECTION
                                    "init=epsg:4326"
        END

        CLASS [#nested] END
    END
[/#macro]