<dataConfig>
    <dataSource type="JdbcDataSource"
                driver="com.microsoft.sqlserver.jdbc.SQLServerDriver"
                url="jdbc:sqlserver://nbnsql-b.nerc-lancaster.ac.uk;databaseName=NBNWarehouse" 
                user="NBNImporter"
                password="Ecowaswashere9"/>
    <document name="nbn-gateway">
        <entity name="taxon" query="Select * From TaxonData" transformer="TemplateTransformer">	  
            <field column="record_id" template="TAXON-${taxon.taxonVersionKey}" />
            <field column="record_type" template="taxon" />
            <entity name="catgory" query="
                        Select * 
                        From TaxonNavigationData  tnd
                        Join TaxonNavigationGroupData tngd ON tnd.taxonNavigationGroupKey = tngd.[key]
                        where TaxonVersionKey = '${taxon.taxonVersionKey}'" transformer="TemplateTransformer">	  
                
            </entity>
        </entity>
        <entity name="designation" query="Select * From DesignationData" transformer="TemplateTransformer">
            <field column="record_id" template="DESIGNATION-${designation.id}" />
            <field column="record_type" template="designation" />
        </entity>
        <entity name="siteboundary" query="Select * From SiteBoundaryData" transformer="TemplateTransformer">
            <field column="record_id" template="SITEBOUNDARY-${siteboundary.featureID}" />
            <field column="record_type" template="siteboundary" />
        </entity>
        <entity name="siteboundarycategory" query="Select * From SiteBoundaryCategoryData" transformer="TemplateTransformer">
            <field column="record_id" template="SITEBOUNDARYCATEGORY-${siteboundarycategory.id}" />
            <field column="record_type" template="siteboundarycategory" />
        </entity>
        <entity name="siteboundarydataset" query="Select * From SiteBoundaryDatasetData" transformer="TemplateTransformer">
            <field column="record_id" template="SITEBOUNDARYDATASET-${siteboundarydataset.datasetKey}" />
            <field column="record_type" template="siteboundarydataset" />
        </entity>
    </document>
</dataConfig>
